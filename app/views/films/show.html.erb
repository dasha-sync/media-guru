<div class="container-films">
  <div class="border rounded show-film item">
    <div class="container mb-4">
      <br>
      <h4><%= @film.film_name %></h4>
      <%= video_tag @film.film_url.to_s, controls: true, class: "film rounded" %>
    </div>
  </div>
  <div class="border rounded show-info-film item">
    <div class="container mb-4 ">
      <br>
      <h6>Дата релиза</h6>
      <p><%= @film.id %>
      <%= @film.release_date %></p>

      <% if current_user&.admin? %>
        <div class="dropdown">
          <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">Добавить категории</button>
          <ul class="dropdown-menu">
            <li><%= link_to 'Добавить страну', new_film_film_country_path(@film), {remote: true, 'data-toggle': :modal, 'data-target': '#modal-window', class: 'dropdown-item'} %></li>
            <li><%= link_to 'Добавить жанр', new_film_film_genre_path(@film), class: "dropdown-item" %></li>
            <li><%= link_to 'Добавить спикера', new_film_film_speaker_path(@film), class: "dropdown-item" %></li>
            <li><%= link_to 'Добавить режиссера', new_film_film_director_path(@film), class: "dropdown-item" %></li>
            <li><%= link_to 'Добавить сценариста', new_film_film_screenwriter_path(@film), class: "dropdown-item" %></li>
          </ul>
        </div>
      <% end %>

      <div id="modal-window" class="modal hide fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
          <div class="modal-content"></div>
        </div>
      </div>

      <%= render template: "film_countries/index", film: @film %>
      <%= render template: "film_genres/index", film: @film %>
      <%= render template: "film_speakers/index", film: @film %>
      <%= render template: "film_directors/index", film: @film %>
      <%= render template: "film_screenwriters/index", film: @film %>
      <br><h6>Описание</h6>
      <label><%=  simple_format(@film.film_description) %></label>
      <br>
    </div>
  </div>

</div>
<div class="border rounded show-recensions">
  <div class="container mb-4">
    <br>
    <h2>Рецензии</h2>
    <%= render 'reviews/form', review: @review %>

    <% @reviews.reverse.each do |review| %>
      <div class="card">
        <div class="card-body">
          <div>
            <strong>:</strong> <%= review.user.username %>
            <small><small>(<%= review.created_at.strftime('%d %b %y %H:%M') %>)</small></small>
            <br>
            <%= simple_format(review.text) %>
            <% if review.user == current_user %>
              <div class="container-review">
                  <%= link_to "Изменить", edit_film_review_path(review.film_id, review.id), class: "btn btn-outline-danger btn-sm" %>
                  <%= button_to "Удалить", film_review_path(review.film_id, review.id), method: :delete, class: "btn btn-danger btn-sm" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
